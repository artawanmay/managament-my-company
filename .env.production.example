# =============================================================================
# MMC Application - Production Environment Configuration
# =============================================================================
# This file documents all environment variables for production deployment.
# Copy this file to .env and fill in the values before deploying.
#
# REQUIRED variables must be set for the application to start.
# OPTIONAL variables have sensible defaults or enable additional features.
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED: Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string for production database
# Format: postgresql://[user]:[password]@[host]:[port]/[database]
#
# Examples:
#   - Local:    postgresql://mmc_user:secure_password@localhost:5432/mmc_db
#   - Docker:   postgresql://mmc_user:secure_password@postgres:5432/mmc_db
#   - Remote:   postgresql://mmc_user:secure_password@db.example.com:5432/mmc_db
#
# For Dokploy with Docker Compose, use the service name as host:
#   postgresql://mmc_user:secure_password@postgres:5432/mmc_db
#
DATABASE_URL=postgresql://mmc_user:CHANGE_ME_SECURE_PASSWORD@postgres:5432/mmc_db

# -----------------------------------------------------------------------------
# REQUIRED: Session Configuration
# -----------------------------------------------------------------------------
# Secret key for signing session cookies
# Must be at least 32 characters long
# Generate with: openssl rand -base64 32
#
SESSION_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32

# -----------------------------------------------------------------------------
# REQUIRED: Encryption Configuration
# -----------------------------------------------------------------------------
# 64-character hex string (32 bytes) for AES-256-GCM encryption
# Used for encrypting sensitive data like credentials and secrets
# Generate with: openssl rand -hex 32
#
ENCRYPTION_KEY=CHANGE_ME_GENERATE_WITH_openssl_rand_hex_32_produces_64_chars

# -----------------------------------------------------------------------------
# OPTIONAL: Redis Configuration
# -----------------------------------------------------------------------------
# Redis connection string for caching and realtime features
# Format: redis://[user]:[password]@[host]:[port]
#
# If not set, the application runs in degraded mode without:
#   - Realtime notifications via SSE
#   - Rate limiting with Redis backend
#   - Distributed session caching
#
# Examples:
#   - Local:    redis://localhost:6379
#   - Docker:   redis://redis:6379
#   - Auth:     redis://default:password@redis:6379
#
REDIS_URL=redis://redis:6379

# -----------------------------------------------------------------------------
# OPTIONAL: Application Configuration
# -----------------------------------------------------------------------------
# Environment mode - MUST be "production" for production deployments
# Enables production optimizations and disables development features
NODE_ENV=production

# Application port (internal, Nginx proxies to this)
# Default: 3000
PORT=3000

# -----------------------------------------------------------------------------
# OPTIONAL: File Storage Configuration
# -----------------------------------------------------------------------------
# Option 1: Local Volume Storage (default)
# Files are stored in a Docker volume mounted at this path
FILE_STORAGE_PATH=/app/uploads

# Option 2: S3-Compatible Storage
# Uncomment and configure for cloud storage (AWS S3, MinIO, DigitalOcean Spaces)
#
# AWS_S3_BUCKET=your-bucket-name
# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key
# AWS_REGION=us-east-1
#
# For S3-compatible services (MinIO, DigitalOcean Spaces), also set:
# AWS_S3_ENDPOINT=https://your-endpoint.com

# -----------------------------------------------------------------------------
# OPTIONAL: PostgreSQL Configuration (for Docker Compose)
# -----------------------------------------------------------------------------
# These are used by the postgres service in docker-compose.yml
# They should match the credentials in DATABASE_URL above
#
POSTGRES_USER=mmc_user
POSTGRES_PASSWORD=CHANGE_ME_SECURE_PASSWORD
POSTGRES_DB=mmc_db

# -----------------------------------------------------------------------------
# OPTIONAL: Logging Configuration
# -----------------------------------------------------------------------------
# Log level: error, warn, info, debug
# Default: info
LOG_LEVEL=info

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Never commit this file with real credentials to version control
# 2. Use strong, unique passwords for DATABASE_URL and POSTGRES_PASSWORD
# 3. Generate SESSION_SECRET and ENCRYPTION_KEY using the commands above
# 4. Rotate secrets periodically and after any suspected compromise
# 5. Use environment-specific values (don't reuse dev credentials in prod)
# =============================================================================
